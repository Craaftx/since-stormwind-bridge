<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Nombre de mois</title>
    <meta name="description" content="The HTML5 Herald" />
    <meta name="author" content="SitePoint" />

    <link
      href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="bg-gray-800 w-screen h-screen flex justify-center items-center">
    <div
      class="w-screen mx-auto py-12 px-6 sm:px-6 md:py-16 md:px-12 md:flex md:items-center md:justify-between md:max-w-6xl"
    >
      <h2
        class="text-3xl leading-9 font-extrabold tracking-tight text-gray-100 sm:text-4xl sm:leading-10"
      >
        Nombre de mois
        <br />
        <span class="text-indigo-600">Depuis le pont d'Hurlevent</span>
      </h2>
      <div class="mt-8 flex lg:flex-shrink-0 lg:mt-0">
        <span
          id="month"
          class="text-6xl tracking-tight leading-10 font-extrabold text-indigo-600"
        ></span>
      </div>
    </div>
    <script src="confetti.min.js"></script>
    <script type="text/javascript">
      function monthDiff(dateFrom, dateTo) {
        return (
          dateTo.getMonth() -
          dateFrom.getMonth() +
          12 * (dateTo.getFullYear() - dateFrom.getFullYear())
        );
      }

      function animateValue(obj, start, end, duration) {
        let startTimestamp = null;
        const step = (timestamp) => {
          if (!startTimestamp) startTimestamp = timestamp;
          const progress = Math.min((timestamp - startTimestamp) / duration, 1);
          obj.innerHTML = Math.floor(progress * (end - start) + start);
          if (progress < 1) {
            window.requestAnimationFrame(step);
          }
        };
        window.requestAnimationFrame(step);
      }
      const monthContainer = document.querySelector("#month");
      const intialDate = new Date("04/25/2014");
      const monthDiffValue = monthDiff(intialDate, new Date());
      animateValue(monthContainer, 0, monthDiffValue, 5000);
      setTimeout(() => {
        confetti.start();
      }, 5200);
      setTimeout(() => {
        confetti.stop();
      }, 8200);
    </script>
  </body>
</html>
